(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(2603)}])},2603:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var l=s(5893),a=s(7294),n=s(3692),r=s(3977),i=s(1019);let c=(0,r.ZF)({apiKey:"AIzaSyBU94yh1GICwAQbH6Sk1RvuJPrqlT4E2tA",databaseURL:"https://trackingspanish-default-rtdb.europe-west1.firebasedatabase.app"}),o=(0,i.N8)(c);function d(){let[e,t]=a.useState(null),[s,r]=a.useState(!1),[c,d]=a.useState("Stats"),[u,h]=a.useState(null);(0,a.useEffect)(()=>{x(),chrome.runtime.sendMessage({message:"POPUP_OPENED"}),chrome.windows.getCurrent(e=>{let t=e.id,s="watchingSpanish-".concat(t);chrome.storage.onChanged.addListener((e,t)=>{if("local"===t&&e[s]){let t=e[s].newValue;console.log("Storage key ".concat(s," changed to ").concat(t)),r(t)}}),chrome.storage.local.get([s],e=>{let t=e[s];void 0!==t&&r(t)})})},[]),(0,a.useEffect)(()=>{if(e){let t=e.uid,s=(0,i.iH)(o,"Users/".concat(t));(0,i.jM)(s,e=>{let t=e.val();h(t)})}},[e]);let x=()=>{chrome.storage.local.get(["user"],e=>{let s=e.user;s?t(s):console.log("User not signed in")})},f=async()=>{let e=await chrome.runtime.sendMessage({message:"sign_in"});e.success&&x()},m=()=>(0,l.jsx)("div",{className:"w-full flex justify-center items-center px-10 h-16 border-b border-white border-opacity-5 text-white",children:(0,l.jsx)("h1",{className:"text-xl font-medium font-sans",children:"Tracking Spanish"})}),g=()=>e&&(0,l.jsx)("div",{className:"w-full flex text-white border-t px-10 h-16 border-white border-opacity-5 "}),w=()=>{let e=new Date().toLocaleDateString().replace(/\./g,"-").replace(/\//g,"-").replace(/\[/g,"-").replace(/\]/g,"-"),t=u.watched_info[e]||0,s=Math.min(t/u.daily_goal*100,100);return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("h2",{className:"text-xl mt-5 text-white font-medium",children:"Daily Progress"}),(0,l.jsxs)("h3",{className:"text-lg mt-2 text-white font-medium",children:[t," minutes"]}),(0,l.jsxs)("p",{className:"text-base mt-1 text-white font-normal opacity-30",children:["out of ",u.daily_goal," minutes goal"]}),(0,l.jsx)("div",{className:"w-full rounded-2xl bg-secondary h-5 mt-1 overflow-hidden",children:(0,l.jsx)("div",{style:{width:"".concat(s,"%")},className:"h-full bg-white"})})]})},p=()=>(0,l.jsx)("div",{className:"flex-grow w-full px-10 flex flex-col items-center ",children:e?(0,l.jsx)(l.Fragment,{children:"Stats"===c&&u&&(0,l.jsx)(w,{})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("button",{onClick:f,className:"bg-secondary px-4 py-2 rounded-md w-full border border-white border-opacity-5 text-white flex justify-center",children:(0,l.jsxs)("div",{className:"flex items-center text-lg font-sans",children:[(0,l.jsx)(n.csj,{className:"mr-5 text-xl"}),"Sign in with Google"]})})})});return(0,l.jsxs)("div",{className:"flex flex-col h-screen w-full bg-primary overflow-y-hidden",children:[(0,l.jsx)(m,{}),(0,l.jsx)(p,{}),(0,l.jsx)(g,{})]})}}},function(e){e.O(0,[627,995,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);