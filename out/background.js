const _0x21dc7e=_0x17a1;(function(_0xedcfc3,_0x273852){const _0x136b85=_0x17a1,_0x8f3379=_0xedcfc3();while(!![]){try{const _0x3cf717=-parseInt(_0x136b85(0xaa))/0x1*(-parseInt(_0x136b85(0xf9))/0x2)+parseInt(_0x136b85(0xd1))/0x3*(-parseInt(_0x136b85(0x122))/0x4)+-parseInt(_0x136b85(0xde))/0x5+parseInt(_0x136b85(0xb1))/0x6*(-parseInt(_0x136b85(0x133))/0x7)+-parseInt(_0x136b85(0xd2))/0x8+parseInt(_0x136b85(0x115))/0x9*(-parseInt(_0x136b85(0xcb))/0xa)+parseInt(_0x136b85(0x10e))/0xb;if(_0x3cf717===_0x273852)break;else _0x8f3379['push'](_0x8f3379['shift']());}catch(_0x393b07){_0x8f3379['push'](_0x8f3379['shift']());}}}(_0x256f,0xdaba8),console['log']('Background\x20script\x20loaded'));import{franc}from'https://cdn.jsdelivr.net/npm/franc@6.2.0/+esm';chrome[_0x21dc7e(0xf4)][_0x21dc7e(0xef)]['addListener'](async()=>{const _0x72922b=_0x21dc7e,_0x46ec07={'Hrrmw':function(_0x6dd4d4,_0x42231e){return _0x6dd4d4>_0x42231e;},'xTnzb':function(_0x27c092,_0x2ae617){return _0x27c092===_0x2ae617;}};for(const _0xfaea01 of chrome[_0x72922b(0xf4)][_0x72922b(0x114)]()[_0x72922b(0x139)]){for(const _0x4b39b7 of await chrome[_0x72922b(0x130)][_0x72922b(0x125)]({'url':_0xfaea01[_0x72922b(0xb5)]})){if(_0x4b39b7[_0x72922b(0xa1)][_0x72922b(0xe5)](/(chrome|chrome-extension):\/\//gi))continue;const _0x3c05aa={'tabId':_0x4b39b7['id'],'allFrames':_0xfaea01['all_frames']};_0xfaea01['js']&&_0x46ec07[_0x72922b(0x110)](_0xfaea01['js'][_0x72922b(0xfe)],0x0)&&chrome[_0x72922b(0xe9)][_0x72922b(0xd8)]({'files':_0xfaea01['js'],'injectImmediately':_0x46ec07[_0x72922b(0xbf)](_0xfaea01[_0x72922b(0xb2)],_0x72922b(0xa2)),'world':_0xfaea01[_0x72922b(0x107)],'target':_0x3c05aa}),_0xfaea01[_0x72922b(0x124)]&&_0x46ec07['Hrrmw'](_0xfaea01[_0x72922b(0x124)][_0x72922b(0xfe)],0x0)&&chrome[_0x72922b(0xe9)][_0x72922b(0xc9)]({'files':_0xfaea01[_0x72922b(0x124)],'origin':_0xfaea01[_0x72922b(0xc3)],'target':_0x3c05aa});}}});const OFFSCREEN_DOCUMENT_PATH=_0x21dc7e(0xf6);let creating;const keywords=[_0x21dc7e(0x119),_0x21dc7e(0x11a),'Spanish\x20food',_0x21dc7e(0x132),_0x21dc7e(0x105),_0x21dc7e(0xa8),_0x21dc7e(0xfd),_0x21dc7e(0x12b),_0x21dc7e(0xe1),_0x21dc7e(0xce),_0x21dc7e(0xf0),_0x21dc7e(0xd7),'how\x20to\x20learn\x20spanish','basic\x20spanish\x20phrases',_0x21dc7e(0xa0),'study\x20spanish\x20vlog',_0x21dc7e(0xf1),_0x21dc7e(0xcf),_0x21dc7e(0x119),'speaking\x20spanish\x20for\x2024\x20hours',_0x21dc7e(0x105),_0x21dc7e(0x100),_0x21dc7e(0xb4),_0x21dc7e(0xee),_0x21dc7e(0x104),_0x21dc7e(0xd9)];async function hasDocument(){const _0x52b496=_0x21dc7e,_0x472474=await clients[_0x52b496(0xd4)]();return _0x472474[_0x52b496(0x126)](_0x5d185b=>_0x5d185b[_0x52b496(0xa1)]===chrome['runtime']['getURL'](OFFSCREEN_DOCUMENT_PATH));}async function setupOffscreenDocument(_0x5dab6e){const _0x24c263=_0x21dc7e,_0x2845a7={'tiQwG':function(_0x5a3096){return _0x5a3096();},'NaJts':_0x24c263(0xd5)};!await _0x2845a7[_0x24c263(0xb3)](hasDocument)&&(creating?await creating:(creating=chrome[_0x24c263(0xa9)][_0x24c263(0xf5)]({'url':_0x5dab6e,'reasons':[chrome[_0x24c263(0xa9)][_0x24c263(0xe6)]['DOM_SCRAPING']],'justification':_0x2845a7[_0x24c263(0x131)]}),await creating,creating=null));}async function closeOffscreenDocument(){const _0x18a1eb=_0x21dc7e,_0x5c3394={'JTUco':function(_0x3317b7){return _0x3317b7();},'TGodQ':_0x18a1eb(0xf2)};await _0x5c3394[_0x18a1eb(0x138)](hasDocument)&&(await chrome[_0x18a1eb(0xa9)]['closeDocument'](),console[_0x18a1eb(0x11c)](_0x5c3394[_0x18a1eb(0xc0)]));}async function getAuthPopup(){const _0x4d865b=_0x21dc7e,_0x5e1b55={'PLDMo':_0x4d865b(0xa9),'czXyG':function(_0x5ee6d1,_0xeade0a){return _0x5ee6d1===_0xeade0a;},'zKIHG':_0x4d865b(0x9f),'uHacy':'Firebase\x20authentication\x20error','PJvyT':_0x4d865b(0xdd)};try{const _0x1c4d0b=await chrome[_0x4d865b(0xf4)][_0x4d865b(0x103)]({'type':_0x4d865b(0xaf),'target':_0x5e1b55[_0x4d865b(0xdf)]});if(_0x5e1b55[_0x4d865b(0xae)](_0x1c4d0b?.['name'],_0x5e1b55['zKIHG']))throw new Error(_0x1c4d0b[_0x4d865b(0xea)]||_0x5e1b55['uHacy']);return console[_0x4d865b(0x11c)](_0x5e1b55[_0x4d865b(0xcd)],_0x1c4d0b),_0x1c4d0b;}catch(_0x6e02a0){throw _0x6e02a0;}}async function updateMinutes(_0x182c68){const _0x2dab7f=_0x21dc7e,_0x438814={'dComQ':_0x2dab7f(0x11b),'TupMW':_0x2dab7f(0xa9),'mvpcZ':_0x2dab7f(0x120)};try{const _0x57576a=await chrome[_0x2dab7f(0xf4)]['sendMessage']({'type':_0x438814[_0x2dab7f(0xb8)],'target':_0x438814['TupMW'],'data':_0x182c68});console[_0x2dab7f(0x11c)](_0x438814[_0x2dab7f(0x12f)],_0x57576a);}catch(_0x55aa6f){console[_0x2dab7f(0xe8)](_0x2dab7f(0x136),_0x55aa6f);throw _0x55aa6f;}}async function updateDailyGoal(_0x1fa9e9,_0x1e0e05){const _0x1067c7=_0x21dc7e,_0x20e93f={'FmGMy':_0x1067c7(0x113),'VpEdv':'offscreen','SaXfb':_0x1067c7(0x11d)};try{const _0xc08747=await chrome[_0x1067c7(0xf4)]['sendMessage']({'type':_0x20e93f[_0x1067c7(0xa6)],'target':_0x20e93f[_0x1067c7(0xb6)],'data':{'userId':_0x1fa9e9,'dailyGoal':_0x1e0e05}});return console[_0x1067c7(0x11c)](_0x1067c7(0xeb),_0xc08747),_0xc08747;}catch(_0xdd7382){console[_0x1067c7(0xe8)](_0x20e93f[_0x1067c7(0xc8)],_0xdd7382);throw _0xdd7382;}}function _0x256f(){const _0x320469=['EDjrm','PJvyT','vlog\x20in\x20spanish','barcelona\x20vlog','tags','330LPaqfb','2780560qjRgzu','sign_in','matchAll','authentication','defaultAudioLanguage','spanish\x20supermarket','executeScript','Estudiar','SS.UTL\x20video\x20details','OZQMb','title','auth','48030vgIiBf','PLDMo','sMlwe','spanish\x20teacher','BwVZA','mlMcJ','LSZgS','match','Reason','3|4|1|0|2','error','scripting','message','res\x20from\x20daily\x20goal','fOVWA','user','España','onInstalled','vlog\x20in\x20spain','spanish\x20vlog','Offscreen\x20document\x20closed','HKoAO','runtime','createDocument','/offscreen.html','UPDATE_DAILY_GOAL','videoId','15910JNUobC','includes','json','then','Spanish\x20culture','length','VCdaL','study\x20Spanish','local','catch','sendMessage','Español','learning\x20Spanish','setPanelBehavior','world','WATCHED_ONE_MINUTE\x20being\x20sent\x20to\x20offscreen','pTSdh','FwycB','piEeS','https://www.googleapis.com/youtube/v3/videos?part=snippet&id=','cIeWV','39426849iMJFKu','onMessage','Hrrmw','addListener','Error\x20fetching\x20video\x20details:','update-daily-goal','getManifest','9NhDtjK','hKVOu','FETCH_VIDEO_DETAILS','spa','spanish','Spanish\x20vlog','update-minutes','log','Error\x20updating\x20daily\x20goal:','POPUP_OPENED','bGDRC','res\x20from\x20update\x20minutes','cvthd','23120neGfSj','Authentication\x20error:','css','query','some','UsgJu','toLowerCase','hCSop','ItctO','Spanish\x20language\x20practice','sign_out','Duril','get','mvpcZ','tabs','NaJts','Spanish\x20cuisine','14VOShHD','type','remove','Error\x20updating\x20minutes:','oauthAccessToken','JTUco','content_scripts','storage','FirebaseError','learning\x20spanish','url','document_start','nxDSl','items','uid','FmGMy','_tokenResponse','Spanish\x20vocabulary','offscreen','178ULQhQk','snippet','dWdYh','OXfWe','czXyG','firebase-auth','AQNOG','4677030zVKXJH','run_at','tiQwG','learn\x20Spanish','matches','VpEdv','HopgH','dComQ','nGGpf','description','&key=','hwasV','dailyGoal','vHivA','xTnzb','TGodQ','HPWzZ','sidePanel','origin','isVideoSpanish','fNgvl','WATCHED_ONE_MINUTE','jVAeB','SaXfb','insertCSS','NQRlz','15523510tTaVSR'];_0x256f=function(){return _0x320469;};return _0x256f();}async function firebaseAuth(){const _0x585815=_0x21dc7e,_0x401ec7={'dWdYh':function(_0x1b0f46){return _0x1b0f46();},'cIeWV':_0x585815(0xdd),'pTSdh':_0x585815(0x123)};try{await setupOffscreenDocument(OFFSCREEN_DOCUMENT_PATH);const _0x4b033c=await _0x401ec7[_0x585815(0xac)](getAuthPopup),_0x579175=_0x4b033c['result'];return console[_0x585815(0x11c)](_0x401ec7[_0x585815(0x10d)],_0x579175),await chrome[_0x585815(0x9e)]['local']['set']({'user':_0x579175[_0x585815(0xed)],'accessToken':_0x579175[_0x585815(0xa7)][_0x585815(0x137)]}),_0x579175;}catch(_0x302387){console[_0x585815(0xe8)](_0x401ec7[_0x585815(0x109)],_0x302387[_0x585815(0xea)]);throw _0x302387;}}async function openOffscreenDoc(){const _0x57d0af=_0x21dc7e,_0x3c027e={'nxDSl':function(_0x39112c,_0x49db56){return _0x39112c(_0x49db56);},'hCSop':_0x57d0af(0x123)};try{return await _0x3c027e[_0x57d0af(0xa3)](setupOffscreenDocument,OFFSCREEN_DOCUMENT_PATH),!![];}catch(_0x13e101){console[_0x57d0af(0xe8)](_0x3c027e[_0x57d0af(0x129)],_0x13e101[_0x57d0af(0xea)]);throw _0x13e101;}}async function firebaseSignOut(){const _0x4f1a90=_0x21dc7e,_0x20e510={'UJuta':_0x4f1a90(0xe7),'HopgH':'Sign-out\x20ACTUALLY\x20CLOSED\x20successful','VCdaL':function(_0x11b523){return _0x11b523();},'hKVOu':'firebase-signout','BwVZA':_0x4f1a90(0xed),'KoBFe':'Sign-out\x20error:'};try{const _0x4c1213=_0x20e510['UJuta']['split']('|');let _0x272af7=0x0;while(!![]){switch(_0x4c1213[_0x272af7++]){case'0':console[_0x4f1a90(0x11c)](_0x20e510[_0x4f1a90(0xb7)]);continue;case'1':await _0x20e510[_0x4f1a90(0xff)](closeOffscreenDocument);continue;case'2':return!![];case'3':await chrome[_0x4f1a90(0xf4)][_0x4f1a90(0x103)]({'type':_0x20e510[_0x4f1a90(0x116)],'target':_0x4f1a90(0xa9)});continue;case'4':await chrome[_0x4f1a90(0x9e)][_0x4f1a90(0x101)][_0x4f1a90(0x135)](_0x20e510[_0x4f1a90(0xe2)]);continue;}break;}}catch(_0x1232a9){console['error'](_0x20e510['KoBFe'],_0x1232a9[_0x4f1a90(0xea)]);throw _0x1232a9;}}async function fetchVideoDetails(_0x3e7305,_0x308071){const _0xf777ae=_0x21dc7e,_0x2b5d0c={'QKTim':function(_0x3c03a0,_0x6f2b12){return _0x3c03a0(_0x6f2b12);},'hwasV':function(_0x4ec51e,_0x469b73){return _0x4ec51e>_0x469b73;},'vHivA':_0xf777ae(0xda)},_0x4cd294=_0xf777ae(0x10c)+_0x3e7305+_0xf777ae(0xbb)+_0x308071;try{const _0x389955=await _0x2b5d0c['QKTim'](fetch,_0x4cd294),_0x990717=await _0x389955[_0xf777ae(0xfb)]();return _0x990717[_0xf777ae(0xa4)]&&_0x2b5d0c[_0xf777ae(0xbc)](_0x990717[_0xf777ae(0xa4)][_0xf777ae(0xfe)],0x0)?(console[_0xf777ae(0x11c)](_0x2b5d0c[_0xf777ae(0xbe)],_0x990717['items'][0x0][_0xf777ae(0xab)]),_0x990717[_0xf777ae(0xa4)][0x0][_0xf777ae(0xab)]):null;}catch(_0x5b5f09){return console[_0xf777ae(0xe8)](_0xf777ae(0x112),_0x5b5f09),null;}}chrome[_0x21dc7e(0xf4)][_0x21dc7e(0x10f)][_0x21dc7e(0x111)]((_0x5abefd,_0x168caa,_0x10d010)=>{const _0x143170=_0x21dc7e,_0x4ee269={'bGDRC':_0x143170(0xd3),'CZgWb':function(_0x108747,_0x391143){return _0x108747(_0x391143);},'OZQMb':_0x143170(0x12c),'QfvSb':'result','sMlwe':'res','AQNOG':function(_0x27cf70,_0x379f19){return _0x27cf70(_0x379f19);},'nGGpf':function(_0x40d74c,_0x27c743,_0x3895d8){return _0x40d74c(_0x27c743,_0x3895d8);},'vbDbd':function(_0x100d17,_0x3b8b17){return _0x100d17(_0x3b8b17);},'fNgvl':function(_0x2a73d4,_0x763e64){return _0x2a73d4(_0x763e64);},'ZsyNQ':function(_0xbc3dba,_0x2abb74){return _0xbc3dba!==_0x2abb74;},'EWLXg':function(_0x3082d7,_0x25c814){return _0x3082d7(_0x25c814);},'UsgJu':function(_0x367125,_0x88aa4){return _0x367125===_0x88aa4;},'ItctO':function(_0x1efe0d){return _0x1efe0d();},'jVAeB':_0x143170(0xc6),'piEeS':_0x143170(0x108),'OXfWe':'user','Duril':function(_0x45fa23,_0x1da67d){return _0x45fa23===_0x1da67d;},'NQRlz':_0x143170(0xf7),'cvthd':function(_0x410a10,_0x46ff88){return _0x410a10===_0x46ff88;},'mlMcJ':_0x143170(0xc4),'HKoAO':function(_0x3a698e,_0x5930c1){return _0x3a698e(_0x5930c1);}};try{if(_0x4ee269[_0x143170(0x127)](_0x5abefd['type'],_0x4ee269[_0x143170(0x11f)]))return _0x4ee269[_0x143170(0x12a)](firebaseAuth)[_0x143170(0xfc)](_0x1a6734=>{const _0x427f58=_0x143170;_0x10d010({'success':!![],'type':_0x4ee269[_0x427f58(0x11f)]});}),!![];else{if(_0x4ee269[_0x143170(0x127)](_0x5abefd[_0x143170(0x134)],_0x4ee269[_0x143170(0xdb)]))return firebaseSignOut()[_0x143170(0xfc)](()=>{const _0x35af38=_0x143170;_0x4ee269['CZgWb'](_0x10d010,{'success':!![],'type':_0x4ee269[_0x35af38(0xdb)]});}),!![];else{if(_0x4ee269[_0x143170(0x127)](_0x5abefd[_0x143170(0x134)],_0x4ee269[_0x143170(0xc7)]))return console[_0x143170(0x11c)](_0x4ee269[_0x143170(0x10b)]),chrome['storage'][_0x143170(0x101)][_0x143170(0x12e)]([_0x4ee269[_0x143170(0xad)]],_0x15e371=>{const _0x5e3fff=_0x143170;console[_0x5e3fff(0x11c)](_0x4ee269['QfvSb'],_0x15e371);const _0x1158bb=_0x15e371[_0x5e3fff(0xed)];if(_0x1158bb){const _0x16cc0c=_0x1158bb[_0x5e3fff(0xa5)];updateMinutes(_0x16cc0c);}}),![];else{if(_0x4ee269[_0x143170(0x12d)](_0x5abefd['type'],_0x4ee269[_0x143170(0xca)]))return chrome['storage'][_0x143170(0x101)]['get'](_0x4ee269[_0x143170(0xad)],_0x5f4a23=>{const _0x60e79b=_0x143170,_0x1c2a00=_0x5f4a23['user'];if(_0x1c2a00){const _0x279fce=_0x1c2a00[_0x60e79b(0xa5)];_0x4ee269['nGGpf'](updateDailyGoal,_0x279fce,_0x5abefd[_0x60e79b(0xbd)])[_0x60e79b(0xfc)](_0x3a2f7f=>{const _0xfc7517=_0x60e79b;console[_0xfc7517(0x11c)](_0x4ee269[_0xfc7517(0xe0)],_0x3a2f7f),_0x10d010({'success':!![]});})[_0x60e79b(0x102)](_0x3e5542=>{const _0x261ab8=_0x60e79b;console[_0x261ab8(0xe8)](_0x261ab8(0x11d),_0x3e5542),_0x4ee269[_0x261ab8(0xb0)](_0x10d010,{'success':![]});});}else _0x4ee269['vbDbd'](_0x10d010,{'success':![]});}),!![];else{if(_0x4ee269[_0x143170(0x121)](_0x5abefd[_0x143170(0x134)],_0x4ee269[_0x143170(0xe3)]))return _0x4ee269[_0x143170(0xf3)](isVideoInSpanish,_0x5abefd['videoDetails'])['then'](_0x280e71=>{const _0x286673=_0x143170;_0x4ee269[_0x286673(0xc5)](_0x10d010,{'success':!![],'isSpanish':_0x280e71});}),!![];else{if(_0x5abefd[_0x143170(0x134)]===_0x143170(0x11e))_0x4ee269['ItctO'](openOffscreenDoc)[_0x143170(0xfc)](_0x33a751=>{const _0x38b0e0=_0x143170;_0x4ee269[_0x38b0e0(0xc5)](_0x10d010,{'success':!![]});});else{if(_0x5abefd[_0x143170(0x134)]===_0x143170(0x117))return chrome[_0x143170(0x9e)][_0x143170(0x101)][_0x143170(0x12e)]([_0x4ee269[_0x143170(0xad)]],_0x3b51be=>{const _0x4e3ff2=_0x143170,_0x34eab1=_0x3b51be[_0x4e3ff2(0xed)];if(_0x34eab1){const _0x54013b=_0x34eab1['apiKey'];_0x4ee269[_0x4e3ff2(0xb9)](fetchVideoDetails,_0x5abefd[_0x4e3ff2(0xf8)],_0x54013b)[_0x4e3ff2(0xfc)](_0x182804=>{_0x4ee269['ZsyNQ'](_0x182804,null)&&_0x10d010({'success':!![],'videoDetails':_0x182804});});}else _0x4ee269['EWLXg'](_0x10d010,{'success':![],'error':'User\x20not\x20found'});}),!![];}}}}}}}catch(_0x3d5960){_0x4ee269[_0x143170(0xb0)](_0x10d010,{'success':![],'error':_0x3d5960[_0x143170(0xea)]});}});function _0x17a1(_0x191486,_0x560baf){const _0x256f41=_0x256f();return _0x17a1=function(_0x17a123,_0x3ef3d4){_0x17a123=_0x17a123-0x9e;let _0x1b0eb6=_0x256f41[_0x17a123];return _0x1b0eb6;},_0x17a1(_0x191486,_0x560baf);}async function isVideoInSpanish(_0x3bfddd){const _0x23c32c=_0x21dc7e,_0x437ebb={'HPWzZ':function(_0x532902,_0xc07978){return _0x532902===_0xc07978;},'FwycB':function(_0x156c4d,_0x1760c0){return _0x156c4d(_0x1760c0);},'EDjrm':_0x23c32c(0x118),'LSZgS':function(_0xde002b,_0x57512b){return _0xde002b(_0x57512b);},'fOVWA':function(_0x43c4d4,_0x6a0e50){return _0x43c4d4||_0x6a0e50;}},_0xad6cc4=_0x3bfddd[_0x23c32c(0xd0)]?_0x3bfddd[_0x23c32c(0xd0)]['map'](_0x26e0b7=>_0x26e0b7['toLowerCase']()):[],_0x611ec4=keywords['map'](_0x98acbc=>_0x98acbc[_0x23c32c(0x128)]()),_0x357ad=_0xad6cc4[_0x23c32c(0x126)](_0xdb5034=>_0x611ec4[_0x23c32c(0xfa)](_0xdb5034)),_0x540f2f=_0x3bfddd[_0x23c32c(0xd6)]?_0x3bfddd['defaultAudioLanguage'][_0x23c32c(0x128)]():'',_0x897371=_0x437ebb['HPWzZ'](_0x437ebb[_0x23c32c(0x10a)](franc,_0x3bfddd[_0x23c32c(0xdc)]),_0x437ebb[_0x23c32c(0xcc)]),_0x4f716a=_0x437ebb[_0x23c32c(0xc1)](_0x437ebb[_0x23c32c(0xe4)](franc,_0x3bfddd[_0x23c32c(0xba)]),_0x437ebb[_0x23c32c(0xcc)]),_0x2dddfa=_0x437ebb[_0x23c32c(0xec)](_0x357ad,_0x897371)||_0x4f716a||_0x540f2f[_0x23c32c(0xfa)]('es');return _0x2dddfa;}chrome[_0x21dc7e(0xc2)][_0x21dc7e(0x106)]({'openPanelOnActionClick':!![]})[_0x21dc7e(0x102)](_0x5e2c09=>console[_0x21dc7e(0xe8)]('SidePanel\x20error:',_0x5e2c09));