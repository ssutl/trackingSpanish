(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1586)}])},1586:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var s=a(5893),l=a(7294),r=a(2777),n=a(3977),o=a(1019),i=a(5341),d=a(2469),c=a(8808),h=a(512),x=a(8388);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.m6)((0,h.W)(t))}var m=a(1465),f=a(5139);let g=(0,f.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none disabled:opacity-50 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 shadow hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white shadow-sm hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 shadow-sm hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),p=l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,asChild:n=!1,...o}=e,i=n?m.g7:"button";return(0,s.jsx)(i,{className:u(g({variant:l,size:r,className:a})),ref:t,...o})});function b(e){let{className:t,classNames:a,showOutsideDays:l=!0,...r}=e;return(0,s.jsx)(c._W,{showOutsideDays:l,className:u("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:u(g({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 border-opacity-5"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-slate-500 rounded-md w-8 font-normal text-[0.8rem] dark:text-slate-400",row:"flex w-full mt-2",cell:u("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-slate-100 [&:has([aria-selected].day-outside)]:bg-slate-100/50 [&:has([aria-selected].day-range-end)]:rounded-r-md dark:[&:has([aria-selected])]:bg-slate-800 dark:[&:has([aria-selected].day-outside)]:bg-slate-800/50","range"===r.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:u(g({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-slate-900 text-slate-50 hover:bg-slate-900 hover:text-slate-50 focus:bg-slate-900 focus:text-slate-50 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50 dark:hover:text-slate-900 dark:focus:bg-slate-50 dark:focus:text-slate-900",day_today:"bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-slate-50",day_outside:"day-outside text-slate-500 opacity-50  aria-selected:bg-slate-100/50 aria-selected:text-slate-500 aria-selected:opacity-30 dark:text-slate-400 dark:aria-selected:bg-slate-800/50 dark:aria-selected:text-slate-400",day_disabled:"text-slate-500 opacity-50 dark:text-slate-400",day_range_middle:"aria-selected:bg-slate-100 aria-selected:text-slate-900 dark:aria-selected:bg-slate-800 dark:aria-selected:text-slate-50",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,s.jsx)(d.wyc,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,s.jsx)(d.XCv,{className:"h-4 w-4"})}},...r})}p.displayName="Button",b.displayName="Calendar";var y=a(5451),w=a(5282),v=a(8318),j=a(1054);let N=(0,n.ZF)({apiKey:"AIzaSyBU94yh1GICwAQbH6Sk1RvuJPrqlT4E2tA",databaseURL:"https://trackingspanish-default-rtdb.europe-west1.firebasedatabase.app"}),_=(0,o.N8)(N),k=[{name:"Level 0",description:"You understand a lot of what you hear, but speaking confidently is still difficult.",hours_of_input:0},{name:"Level 1",description:"Your comprehension is improving, and you can follow more everyday conversations, but speaking remains challenging.",hours_of_input:50},{name:"Level 2",description:"You can follow native conversations with effort, understanding the main ideas, though speaking is still limited.",hours_of_input:150},{name:"Level 3",description:"You can both understand and contribute to conversations, expressing yourself more comfortably with native speakers.",hours_of_input:300}];function S(){let[e,t]=l.useState(null),[a,n]=l.useState(!1),[d,c]=l.useState("Stats"),[h,x]=l.useState(null),[u,m]=l.useState(!1),[f,g]=l.useState(h?h.daily_goal:10),p=!!h&&new Date(h.created_at).getTime()+6048e5>Date.now(),N=p&&!h.paid;(0,l.useEffect)(()=>{S(),chrome.runtime.sendMessage({type:"POPUP_OPENED"})},[]),(0,l.useEffect)(()=>{if(e){let t=e.uid,a=(0,o.iH)(_,"Users/".concat(t));(0,o.jM)(a,e=>{let t=e.val();x(t)})}},[e]);let S=()=>{chrome.storage.local.get(["user"],e=>{let a=e.user;a&&t(a)})},D=async()=>{let e=await chrome.runtime.sendMessage({type:"sign_in"});e.success&&S()},E=async()=>{let e=await chrome.runtime.sendMessage({type:"sign_out"});e.success&&(x(null),t(null),console.log("User signed out"))},C=async()=>{if(f>0){let e=await chrome.runtime.sendMessage({type:"UPDATE_DAILY_GOAL",dailyGoal:f});e.success?m(!1):alert("Error updating daily goal")}else alert("Please enter a valid goal")},L=()=>(0,s.jsx)("div",{className:"w-full flex justify-center items-center px-10 h-16 border-b border-white border-opacity-5 text-white",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"rounded-full bg-secondary w-10 h-10 flex items-center justify-center mr-auto",children:(0,s.jsx)("img",{src:e.photoURL,className:"w-8 h-8 rounded-full"})}),(0,s.jsx)("div",{className:" hover:bg-secondary rounded-md p-1 cursor-pointer",onClick:()=>E(),children:(0,s.jsx)(w.UEk,{className:"text-white text-xl"})})]}):(0,s.jsx)("h1",{className:"text-xl font-medium",children:"Tracking Spanish"})}),A=()=>e&&(0,s.jsxs)("div",{className:"w-full flex text-white border-t px-10 h-16 border-white border-opacity-5 ",children:[(0,s.jsx)("button",{onClick:()=>c("Stats"),className:"flex-1 flex items-center justify-center ".concat("Stats"===d?"border-t-2 border-orange-400 ":"hover:bg-secondary hover:bg-opacity-10"),children:(0,s.jsx)(v.xID,{className:"text-xl"})}),(0,s.jsx)("button",{onClick:()=>c("Levels"),className:"flex-1 flex items-center justify-center ".concat("Levels"===d?"border-t-2 border-orange-400":"hover:bg-secondary hover:bg-opacity-10"),children:(0,s.jsx)(j.fi_,{className:"text-xl"})}),(0,s.jsx)("button",{onClick:()=>c("Settings"),className:"flex-1 flex items-center justify-center ".concat("Settings"===d?"border-t-2 border-orange-400":"hover:bg-secondary hover:bg-opacity-10"),children:(0,s.jsx)(w.e1b,{className:"text-xl"})})]}),M=()=>{let e=new Date().toLocaleDateString().replace(/\./g,"-").replace(/\//g,"-").replace(/\[/g,"-").replace(/\]/g,"-"),t=h.watched_info[e]&&h.watched_info[e].minutes_watched||0,a=Math.min(t/h.daily_goal*100,100),l=0;for(let e in h.watched_info)l+=h.watched_info[e].minutes_watched;let r=(e=>{let t=0,a=new Date,s=e=>{let t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return"".concat(t,"-").concat(a,"-").concat(s)},l=s(a);for(;e[l]&&e[l].minutes_watched>0;)t++,a.setDate(a.getDate()-1),l=s(a);return Math.min(t,7)})(h.watched_info);return(0,s.jsxs)("div",{className:"w-full space-y-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Daily Progress"}),(0,s.jsxs)("button",{className:"flex text-base items-center text-white",onClick:()=>m(!u),children:[(0,s.jsx)(y.r3Y,{className:"mr-2"}),"Edit Goal"]})]}),u?(0,s.jsxs)("div",{className:"flex items-center mt-5",children:[(0,s.jsx)("input",{type:"number",placeholder:h.daily_goal.toString(),className:"text-white border-opacity-5 border bg-transparent border-white rounded-md p-2 w-20 mr-4 hover:bg-secondary",onChange:e=>{g(parseInt(e.target.value))},value:f,defaultValue:f,autoFocus:!0}),(0,s.jsx)("p",{className:"text-base text-white font-normal mr-4 bg-opacity-20",children:"min/day"}),(0,s.jsx)("button",{type:"submit",className:"py-2 px-4 border border-white border-opacity-5 rounded-md text-white ".concat(f>0&&f!==h.daily_goal&&"bg-orange-400 cursor-pointer"),onClick:C,disabled:!(f>0&&f!==h.daily_goal),children:"Update"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h3",{className:"text-lg mt-3 text-white font-normal",children:[t," minutes"]}),(0,s.jsxs)("p",{className:"text-base mt-0 text-white font-normal opacity-30",children:["out of ",h.daily_goal," minutes goal"]}),(0,s.jsx)("div",{className:"w-full rounded-2xl bg-secondary h-5 mt-2 overflow-hidden",children:(0,s.jsx)("div",{style:{transform:"translateX(-".concat(100-(a||0),"%)"),transition:"transform 3s ease-in-out"},className:"h-full bg-white"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Total Watched"}),(0,s.jsx)("h1",{className:"text-5xl mt-3 text-white font-bold",children:(e=>{let t=Math.floor(e/60),a=e%60;return t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a," minutes")})(l)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Days Practiced"}),(0,s.jsxs)("div",{className:"flex w-full items-center mt-3",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-full bg-secondary flex items-center justify-center ",children:(0,s.jsx)(i.l_V,{className:"text-white text-4xl "})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("h3",{className:"text-lg mt-3 text-white font-normal",children:[r," day".concat(r>1?"s":"")]}),(0,s.jsx)("p",{className:"text-base mt-0 text-white font-normal opacity-30",children:"out of a maximum of 7 days"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Your Activity"}),(0,s.jsx)(b,{mode:"single",className:"rounded-md text-white w-full mt-3 border border-white border-opacity-5 flex",classNames:{months:"flex w-full flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0 flex-1",month:"space-y-4 w-full flex flex-col",table:"w-full h-full border-collapse space-y-1",head_row:"",row:"w-full mt-2"},components:{Day:e=>(0,s.jsx)(P,{...e})}})]})]})},P=e=>{let{displayMonth:t,date:a}=e,l=new Date(a).toLocaleDateString().replace(/\./g,"-").replace(/\//g,"-").replace(/\[/g,"-").replace(/\]/g,"-"),r=h.watched_info[l]&&h.watched_info[l].minutes_watched||0;return(0,s.jsxs)("div",{className:"flex flex-col rounded-md hover:bg-secondary py-2",children:[(0,s.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,s.jsx)("div",{children:new Date(a).getDate()})}),(0,s.jsx)("div",{className:"flex w-full items-center justify-center text-xs text-orange-400 h-6",children:r>0&&"".concat(r,"m")})]})},Y=()=>{let e=0;for(let t in h.watched_info)e+=h.watched_info[t].minutes_watched;return(0,s.jsxs)("div",{className:"w-full flex flex-col",children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Levels"}),k.map((t,a)=>{let l=60*t.hours_of_input,r=Math.min(e/l*100,100),n=h.daily_goal,o=l-e;return(0,s.jsxs)("div",{className:"w-full relative rounded-md p-5 border border-white border-opacity-5 mt-5 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 h-full ".concat(100===r?"bg-orange-400":"bg-secondary"),style:{width:"".concat(r,"%"),transition:"width 0.5s ease-in-out"}}),(0,s.jsxs)("div",{className:"relative z-10 text-white",children:[(0,s.jsx)("h1",{className:"text-5xl text-white font-bold",children:t.name}),(0,s.jsx)("h3",{className:"text-lg mt-3 text-white font-normal",children:t.description}),(0,s.jsx)("p",{className:"text-base mt-3 text-white font-normal",children:"Hours of input: ".concat(t.hours_of_input)}),r<100&&(0,s.jsx)("p",{className:"text-base mt-3 text-white font-normal opacity-30",children:"You'll reach this level in ".concat(Math.ceil(o/n)," days based on your current daily goal")})]})]},a)})]})},U=()=>(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Export Data"})}),F=()=>{e&&chrome.tabs.create({url:"https://trackingspanish.vercel.app/".concat(e.uid)})};return(0,s.jsxs)("div",{className:"flex flex-col h-screen w-full bg-primary overflow-y-hidden",children:[(0,s.jsx)(L,{}),(0,s.jsxs)("div",{className:"w-full flex px-10 py-5 flex-col overflow-y-scroll no-scrollbar ".concat(h?"h-[calc(100vh-128px)]":"h-[calc(100vh-64px)]"),children:[N&&(0,s.jsx)("div",{className:"w-full bg-secondary border border-white border-opacity-5 text-white py-2 px-3 rounded-md mb-10 cursor-pointer",onClick:F,children:(0,s.jsxs)("p",{className:"text-center",children:["You have"," ",7-Math.floor((Date.now()-new Date(h.created_at).getTime())/864e5)," ","days left in your trial. Click to upgrade for unlimited access."]})}),h&&(p||h.paid)?(0,s.jsxs)(s.Fragment,{children:["Stats"===d&&h&&(0,s.jsx)(M,{}),"Levels"===d&&(0,s.jsx)(Y,{}),"Settings"===d&&(0,s.jsx)(U,{})]}):!h||p&&h.paid?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{onClick:D,className:"bg-secondary px-4 py-2 rounded-md w-full border border-white border-opacity-5 text-white flex justify-center",children:(0,s.jsxs)("div",{className:"flex items-center text-lg font-sans",children:[(0,s.jsx)(r.csj,{className:"mr-5 text-xl"}),"Sign in with Google"]})})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("h1",{className:"text-white text-center",children:"PAY ME NIGGGAAAAHH"})})]}),(0,s.jsx)(A,{})]})}}},function(e){e.O(0,[970,845,768,660,127,409,627,991,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);