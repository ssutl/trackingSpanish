(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1586)}])},1586:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(5893),l=a(7294),r=a(2777),d=a(3977),n=a(1019),o=a(5341),i=a(2469),c=a(8808),x=a(512),h=a(8388);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,h.m6)((0,x.W)(t))}var m=a(1465),f=a(5139);let g=(0,f.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none disabled:opacity-50 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 shadow hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white shadow-sm hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 shadow-sm hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),b=l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,asChild:d=!1,...n}=e,o=d?m.g7:"button";return(0,s.jsx)(o,{className:u(g({variant:l,size:r,className:a})),ref:t,...n})});function w(e){let{className:t,classNames:a,showOutsideDays:l=!0,...r}=e;return(0,s.jsx)(c._W,{showOutsideDays:l,className:u("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:u(g({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 border-opacity-5"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-slate-500 rounded-md w-8 font-normal text-[0.8rem] dark:text-slate-400",row:"flex w-full mt-2",cell:u("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-slate-100 [&:has([aria-selected].day-outside)]:bg-slate-100/50 [&:has([aria-selected].day-range-end)]:rounded-r-md dark:[&:has([aria-selected])]:bg-slate-800 dark:[&:has([aria-selected].day-outside)]:bg-slate-800/50","range"===r.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:u(g({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-slate-900 text-slate-50 hover:bg-slate-900 hover:text-slate-50 focus:bg-slate-900 focus:text-slate-50 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50 dark:hover:text-slate-900 dark:focus:bg-slate-50 dark:focus:text-slate-900",day_today:"bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-slate-50",day_outside:"day-outside text-slate-500 opacity-50  aria-selected:bg-slate-100/50 aria-selected:text-slate-500 aria-selected:opacity-30 dark:text-slate-400 dark:aria-selected:bg-slate-800/50 dark:aria-selected:text-slate-400",day_disabled:"text-slate-500 opacity-50 dark:text-slate-400",day_range_middle:"aria-selected:bg-slate-100 aria-selected:text-slate-900 dark:aria-selected:bg-slate-800 dark:aria-selected:text-slate-50",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,s.jsx)(i.wyc,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,s.jsx)(i.XCv,{className:"h-4 w-4"})}},...r})}b.displayName="Button",w.displayName="Calendar";let p=(0,d.ZF)({apiKey:"AIzaSyBU94yh1GICwAQbH6Sk1RvuJPrqlT4E2tA",databaseURL:"https://trackingspanish-default-rtdb.europe-west1.firebasedatabase.app"}),y=(0,n.N8)(p);function v(){let[e,t]=l.useState(null),[a,d]=l.useState(!1),[i,c]=l.useState("Stats"),[x,h]=l.useState(null);(0,l.useEffect)(()=>{u(),chrome.runtime.sendMessage({message:"POPUP_OPENED"}),chrome.windows.getCurrent(e=>{let t=e.id,a="watchingSpanish-".concat(t);chrome.storage.onChanged.addListener((e,t)=>{if("local"===t&&e[a]){let t=e[a].newValue;console.log("Storage key ".concat(a," changed to ").concat(t)),d(t)}}),chrome.storage.local.get([a],e=>{let t=e[a];void 0!==t&&d(t)})})},[]),(0,l.useEffect)(()=>{if(e){let t=e.uid,a=(0,n.iH)(y,"Users/".concat(t));(0,n.jM)(a,e=>{let t=e.val();h(t)})}},[e]);let u=()=>{chrome.storage.local.get(["user"],e=>{let a=e.user;a?t(a):console.log("User not signed in")})},m=async()=>{let e=await chrome.runtime.sendMessage({message:"sign_in"});e.success&&u()},f=()=>(0,s.jsx)("div",{className:"w-full flex justify-center items-center px-10 h-16 border-b border-white border-opacity-5 text-white",children:e?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"rounded-full bg-secondary w-10 h-10 flex items-center justify-center mr-auto",children:(0,s.jsx)("img",{src:e.photoURL,className:"w-8 h-8 rounded-full"})})}):(0,s.jsx)("h1",{className:"text-xl font-medium",children:"Tracking Spanish"})}),g=()=>e&&(0,s.jsx)("div",{className:"w-full flex text-white border-t px-10 h-16 border-white border-opacity-5 "}),b=()=>{let e=new Date().toLocaleDateString().replace(/\./g,"-").replace(/\//g,"-").replace(/\[/g,"-").replace(/\]/g,"-"),t=x.watched_info[e]||0,a=Math.min(t/x.daily_goal*100,100),l=0;for(let e in x.watched_info)l+=x.watched_info[e];let r=(e=>{let t=0,a=new Date,s=a.toLocaleDateString().replace(/\./g,"-").replace(/\//g,"-").replace(/\[/g,"-").replace(/\]/g,"-");for(;e[s]>0;)t++,a.setDate(a.getDate()-1),s=a.toLocaleDateString().replace(/\./g,"-").replace(/\//g,"-").replace(/\[/g,"-").replace(/\]/g,"-");let l=Math.min(t,7);return l})(x.watched_info);return(0,s.jsxs)("div",{className:"w-full grid py-5 gap-y-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Daily Progress"}),(0,s.jsxs)("h3",{className:"text-lg mt-3 text-white font-normal",children:[t," minutes"]}),(0,s.jsxs)("p",{className:"text-base mt-0 text-white font-normal opacity-30",children:["out of ",x.daily_goal," minutes goal"]}),(0,s.jsx)("div",{className:"w-full rounded-2xl bg-secondary h-5 mt-2 overflow-hidden",children:(0,s.jsx)("div",{style:{width:"".concat(a,"%"),transition:"width 1s ease-in-out"},className:"h-full bg-white"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Total Watched"}),(0,s.jsx)("h1",{className:"text-5xl mt-3 text-white font-bold",children:(e=>{let t=Math.floor(e/60),a=e%60;return t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a," minutes")})(l)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Days Practiced"}),(0,s.jsxs)("div",{className:"flex w-full items-center mt-3",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-full bg-secondary flex items-center justify-center ",children:(0,s.jsx)(o.l_V,{className:"text-white text-4xl "})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("h3",{className:"text-lg mt-3 text-white font-normal",children:[r," day".concat(r>1?"s":"")]}),(0,s.jsx)("p",{className:"text-base mt-0 text-white font-normal opacity-30",children:"out of a maximum of 7 days"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl text-orange-400 font-medium",children:"Your Activity"}),(0,s.jsx)(w,{mode:"single",className:"rounded-md text-white w-full mt-3 border border-white border-opacity-5 flex",classNames:{months:"flex w-full flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0 flex-1",month:"space-y-4 w-full flex flex-col",table:"w-full h-full border-collapse space-y-1",head_row:"",row:"w-full mt-2"},components:{Day:e=>(0,s.jsx)(p,{...e})}})]})]})},p=e=>{let{displayMonth:t,date:a}=e,l=new Date(a).toLocaleDateString().replace(/\./g,"-").replace(/\//g,"-").replace(/\[/g,"-").replace(/\]/g,"-"),r=x.watched_info[l]||0;return(0,s.jsxs)("div",{className:"flex flex-col rounded-md hover:bg-secondary py-2",children:[(0,s.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,s.jsx)("div",{children:new Date(a).getDate()})}),(0,s.jsx)("div",{className:"flex w-full items-center justify-center text-xs text-orange-400 h-6",children:r>0&&"".concat(r,"m")})]})},v=()=>(0,s.jsx)("div",{className:"flex-grow w-full px-10 flex flex-col items-center overflow-y-scroll no-scrollbar",children:e?(0,s.jsx)(s.Fragment,{children:"Stats"===i&&x&&(0,s.jsx)(b,{})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{onClick:m,className:"bg-secondary px-4 py-2 rounded-md w-full border border-white border-opacity-5 text-white flex justify-center",children:(0,s.jsxs)("div",{className:"flex items-center text-lg font-sans",children:[(0,s.jsx)(r.csj,{className:"mr-5 text-xl"}),"Sign in with Google"]})})})});return(0,s.jsxs)("div",{className:"flex flex-col h-screen w-full bg-primary overflow-y-hidden",children:[(0,s.jsx)(f,{}),(0,s.jsx)(v,{}),(0,s.jsx)(g,{})]})}}},function(e){e.O(0,[768,409,627,991,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);